import{r as o,j as e,u as b}from"./index-0bf6c8c4.js";import{I as d}from"./Input-e9193b1c.js";import"./axios-7d4ad366.js";import{S as f,a as u,b as x,c as g,d as h}from"./select-3dd15377.js";import{S as j}from"./sweetalert2.all-6574e3c1.js";import{a as v}from"./axios-82afda87.js";import{L as w}from"./loader-2-8a7264cf.js";import"./chevron-down-a7212ae3.js";const I=({className:i,label:c,options:l,setData:s,value:a})=>{const[,t]=o.useState(""),m=r=>{const n=l.find(p=>p.name===r);n&&(s(n.name),console.log(n),t(r))};return e.jsxs("div",{className:i+"w-full flex flex-col gap-1 text-xs",children:[e.jsx("p",{className:"  mb-1 truncate",children:c}),e.jsxs(f,{required:!0,value:a,onValueChange:m,children:[e.jsx(u,{className:"  w-full h-[40px] outline-0 border border-blue/50 shadow-inner rounded-md pl-4",children:e.jsx(x,{placeholder:"Select Position..."})}),e.jsx(g,{children:l.map(r=>e.jsx(h,{value:r.name,children:r.name}))})]})]})},S=({className:i,label:c,options:l,setData:s,value:a})=>{const[,t]=o.useState(""),m=r=>{const n=l.find(p=>p.name===r);n&&(s(n.id),console.log("selected: ",n),t(r))};return o.useEffect(()=>{const r=l.find(n=>n.id===a);r&&t(r.name)},[l,a]),e.jsxs("div",{className:i+"w-full flex flex-col gap-1 text-xs",children:[e.jsx("p",{className:"  mb-1 truncate",children:c}),e.jsxs(f,{required:!0,value:a,onValueChange:m,children:[e.jsx(u,{className:"  w-full h-[40px] outline-0 border border-blue/50 shadow-inner rounded-md pl-4",children:e.jsx(x,{placeholder:"Select Office..."})}),e.jsx(g,{children:l.map(r=>e.jsx(h,{value:r.name,children:r.name}))})]})]})},k=()=>{const i=b(),[c,l]=o.useState(""),[s,a]=o.useState({first_name:"",last_name:"",email:"",position:"",office:"",password:"",acc_lvl:""});return o.useEffect(()=>{console.table(s)},[s]),o.useEffect(()=>{const t={"Regional Director":1,"Provincial Officer":2,"Project Development Officer I":3,"Project Development Officer II":3,"Project Development Officer III":3,"Cyber Security Officer I":3,"Cyber Security Officer II":3,"Cyber Security Officer III":3};t[s.position]&&a({...s,acc_lvl:t[s.position]})},[s.position]),e.jsx("div",{className:" w-full h-[100vh] bg-blue3 flex justify-center items-center",children:e.jsxs("div",{className:" w-[90%]  sm:h-[95%] sm:w-[90%]  overflow-hidden bg-white rounded-md drop-shadow-glow flex flex-col p-10 sm:p-5 gap-10 sm:gap-5",children:[e.jsxs("div",{className:" sm:gap-5 flex flex-row sm:flex-col items-center w-full sm:items-start justify-between",children:[e.jsxs("div",{className:"div1",children:[e.jsx("h1",{className:"text-black font-poppins font-bold  w-[200px] text-lg eading-normal tracking-tight",children:" Register User "}),e.jsx("p",{className:"text-teal-500 font-poppins text-m text-base font-normal leading-normal tracking-tight ",children:" Create New User"})]}),e.jsx("div",{className:"  flex sm:flex-col items-center gap-5 sm:justify-between w-full justify-end  relative sm:gap-5 sm:items-start  ",children:e.jsx("button",{className:`\r
                        rounded-[5px] truncate border-2 border-red-600 hover:bg-bgG/10 transition-all duration-200 bg-red-600/20  text-red-600 px-5 py-1 font-medium text-xs\r
                    `,onClick:()=>{i("/dts/admin/user")},children:"Cancel"})})]}),e.jsxs("form",{onSubmit:t=>{t.preventDefault(),l("spin");try{v.post("users/",s,{headers:{Authorization:`Token ${localStorage.getItem("keys")}`}}).then(()=>{setTimeout(()=>{j.fire({icon:"success",title:"Succesfully created a new account",showConfirmButton:!1,timer:1500})},1e3),setTimeout(()=>{l(""),a({first_name:"",last_name:"",email:"",position:"",office:"",password:"",acc_lvl:""}),i("/dts/admin/user")},2e3),console.log(" Submitted")})}catch(m){console.error("This is an error!",m),l("")}},className:" grid grid-cols-3 gap-5 sm:gap-2 items-end",children:[e.jsx(d,{required:!0,label:"First Name",span:" col-span-1 sm:col-span-3 md:col-span-3",value:s.first_name,onChange:t=>a({...s,first_name:t.target.value})}),e.jsx(d,{required:!0,label:"Last Name",span:" col-span-1 sm:col-span-3 md:col-span-3",value:s.last_name,onChange:t=>a({...s,last_name:t.target.value})}),e.jsx(d,{required:!0,type:"email",label:"Email",span:" col-span-1 sm:col-span-3 md:col-span-3",value:s.email,onChange:t=>a({...s,email:t.target.value})}),e.jsx(I,{label:"Position",className:"cursor-pointer col-span-1 sm:col-span-3 md:col-span-3 ",setData:t=>a({...s,position:t}),value:s.position,options:[{id:1,name:"Regional Director"},{id:2,name:"Provincial Officer"},{id:3,name:"Project Development Officer I"},{id:4,name:"Project Development Officer II"},{id:5,name:"Project Development Officer III"},{id:6,name:"Cyber Security Officer I"},{id:7,name:"Cyber Security Officer II"},{id:8,name:"Cyber Security Officer III"}]}),e.jsx(S,{label:"Office Designation",className:"cursor-pointer col-span-1 sm:col-span-3 md:col-span-3 ",setData:t=>a({...s,office:t}),options:JSON.parse(localStorage.getItem("offices")||"")}),e.jsx(d,{required:!0,type:"password",label:"Password",span:" col-span-1 sm:col-span-3 md:col-span-3",value:s.password,onChange:t=>a({...s,password:t.target.value})}),e.jsx("div",{className:"flex flex-col w-full col-span-3 ",children:c?e.jsxs("button",{className:" pointer-events-none text-textW bg-bgG hover:bg-bgG/10  transition-all  duration-75 cursor-pointer text-[18px] w-full h-[45px] mt-6 rounded-full flex items-center justify-center gap-2 ",type:"submit",children:[" Loading ",e.jsx(w,{className:" animate-spin"})," "]}):e.jsx("button",{type:"submit",className:`  w-full rounded-[5px] truncate border-2 border-textG hover:bg-bgG/10 transition-all duration-200 bg-bgG mt-6 text-textG px-5 py-1 font-medium text-md\r
                    `,children:" Register User"})})]})]})})};export{k as default};
