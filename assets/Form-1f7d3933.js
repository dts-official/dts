import{r as o,j as e,u as j,B as S}from"./index-0bf6c8c4.js";import{I as c}from"./Input-e9193b1c.js";import"./axios-7d4ad366.js";import{D as y}from"./dropdownReceive-d177d854.js";import{S as N,a as k,b as w,c as C,e as O,f as T,d as E}from"./select-3dd15377.js";import{S as x}from"./sweetalert2.all-6574e3c1.js";import{a as h}from"./axios-82afda87.js";import"./chevron-down-a7212ae3.js";const D=({label:s,data:a,disabled:p,setData:d,onSubmit:t})=>{const[m,n]=o.useState(""),[u,l]=o.useState("");o.useEffect(()=>{l(a.specific)},[]),o.useEffect(()=>{t&&d({...a,reason:""}),console.log(t)},[t]);const[i]=o.useState([{type:"Official",options:["Travel (Please specify)","Seminar/Training/Conference/Meeting","Document Tracking/Pick-ip/Delivery","Others [1]"]},{type:"Personal",options:["Medication/Physical Check-up(subject to presentation of Doctor’s Certificate)","Medical Attention to Family Member/Relative","Others [2]"]}]),g=r=>{n(r),d({...a,reason:r}),l("")},b=r=>{d({...a,specific:r.target.value}),l(r.target.value)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:" cursor-pointer col-span-2 sm:col-span-1 w-full flex flex-col gap-1",children:[e.jsx("p",{className:" text-xs",children:s}),e.jsxs(N,{disabled:p,required:!0,defaultValue:a.reason?a.reason:"",onValueChange:g,children:[e.jsx(k,{className:"  border border-blue/50 px-4 py-2 flex h-10 w-full rounded-md  bg-background text-sm outline-none ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2  disabled:cursor-not-allowed disabled:opacity-50",children:e.jsx(w,{placeholder:"Select..."})}),e.jsx(C,{children:i.map(r=>e.jsxs(O,{children:[e.jsx(T,{children:r.type}),r.options.map((f,v)=>e.jsx(E,{value:f,children:f},v))]}))})]})]}),e.jsx("div",{className:" col-span-2",children:e.jsx(c,{type:"text",label:"Please specify",required:!0,placeholder:"",value:a.specific,onChange:b,className:"w-full p-2 border rounded"})})]})};function A(){const[s,a]=o.useState(JSON.parse(localStorage.getItem("selected2")||"")),[p,d]=o.useState(!1);o.useEffect(()=>{console.log("2323",s)},[s]);const[t]=o.useState(s.userID==JSON.parse(localStorage.getItem("user")||"").id);let m=j();const n=l=>{a({...s,[l.target.name]:l.target.value})},u=l=>{l.preventDefault(),t?(console.log(s),h.put(`gpass/${s.id}`,s,{headers:{Authorization:`Token ${localStorage.getItem("keys")} `}}).then(i=>{x.fire({icon:"success",title:"Update Succesfully",showConfirmButton:!1,timer:1500}),a({id:"",title:"",type:"",requestor:"",doctype:"",message:"",status:"",position:"",remarks:"",reason:""}),setTimeout(()=>{m("/dts/home/gpass/process")},1500),d(!p)}).catch(i=>{console.log(i.data)})):h.patch(`gpass/sign_document/${s.id}`,{remarks:s.remarks},{headers:{Authorization:`Token ${localStorage.getItem("keys")} `}}).then(i=>{x.fire({icon:"success",title:"Received Succesfully",showConfirmButton:!1,timer:1500}),a({id:"",title:"",type:"",requestor:"",doctype:"",message:"",status:"",position:"",remarks:"",reason:""}),setTimeout(()=>{m("/dts/home/gpass/completed")},1500)}).catch(i=>{console.log(i.data)})};return e.jsx(e.Fragment,{children:e.jsx("div",{className:" relative    min-h-full w-full sm:pb-20 sm:pt-0  flex items-start justify-center gap-5  mt-5 overflow-y-scroll pb-24  ",children:e.jsxs("div",{className:" relative rounded-md animate__animated animate__fadeInUp w-[80%] sm:w-full sm:mx-5 max-w-[1366px] sm:px-2 px-10 border-dashed border border-blue/50 bg-white min-h-[200px] pb-5",children:[e.jsxs("div",{className:" w-full flex items-center justify-between py-4 ",children:[e.jsxs("div",{className:" flex flex-col leading-2",children:[e.jsx("h1",{className:" font-semibold text-base sm:text-xs",children:t?"Editable File Details":"Received File Details"}),t?e.jsx("p",{className:" text-xs text-red-600 font-medium sm:text-[8px]",children:"*Note that once you click save it will update you document details"}):e.jsx("p",{className:" text-xs font-medium sm:text-[8px]",children:"Don’t forget to leave remarks of the before clicking Received"})]}),e.jsx("div",{onClick:()=>{m("/dts/home/gpass/process")},className:" cursor-pointer flex items-center justify-center bg-[#FF9292] text-xs rounded-[5px] border-dashed border text-blue border-blue h-[20px] w-[80px] ",children:"Back"})]}),e.jsxs("form",{className:" w-full border border-gray-500/20 rounded-[5px] px-5 py-8  grid grid-cols-4 gap-3  sm:grid-cols-1    ",onSubmit:u,children:[e.jsx(D,{onSubmit:p,disabled:!t,name:"reason",data:s,setData:a,label:"Select Reason",className:"cursor-pointer col-span-4 sm:col-span-1 "}),e.jsx(c,{label:"Time of Departure",placeholder:"E.g Officer1",span:"col-span-2 sm:col-span-1",disabled:!t,type:"datetime-local",value:s.departure,name:"departure",onChange:n}),e.jsx(c,{label:"Time of Returns",placeholder:"E.g Officer1",span:" col-span-2 sm:col-span-1",disabled:!t,type:"datetime-local",value:s.returns,name:"returns",onChange:n}),e.jsx(c,{label:"Venue",placeholder:"E.g N Hotel, Cagayan de Oro Mis. Or",span:"col-span-4 sm:col-span-1",disabled:!t,value:s.venue,name:"venue",onChange:n}),e.jsx(c,{label:"Name of the Requestor",placeholder:"E.g Taylor Sheeesh",span:"col-span-2 sm:col-span-1",disabled:!t,value:s.requestor,name:"requestor",onChange:n}),t?e.jsx(y,{label:"Approved by",className:"cursor-pointer col-span-2 sm:col-span-1 ",data:s,setData:a,options:JSON.parse(localStorage.getItem("offices")||"")}):e.jsx(c,{label:"Remarks",placeholder:"E.g Signed",span:"col-span-2 sm:col-span-1",value:s.remarks,name:"remarks",onChange:n}),e.jsx(S,{variant:"outline",className:" bg-[#038500] rounded-[5px] text-white col-span-4 sm:col-span-1",children:t?"Save Edit":"Received"})]})]})})})}export{A as default};
