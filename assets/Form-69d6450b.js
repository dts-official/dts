import{r as c,u,j as e,B as x}from"./index-22e87fe1.js";import{I as r}from"./Input-266237e7.js";import"./axios-7d4ad366.js";import{D as h,a as g}from"./dropdownTypes-30d55f4e.js";import{S as m}from"./sweetalert2.all-4f4a2599.js";import{a as d}from"./axios-82afda87.js";import"./select-380a8f38.js";import"./chevron-down-0a11d77c.js";function k(){const[s,a]=c.useState(JSON.parse(localStorage.getItem("selected")||"")),[t]=c.useState(s.userID==JSON.parse(localStorage.getItem("user")||"").id);let i=u();const o=n=>{a({...s,[n.target.name]:n.target.value})},p=n=>{n.preventDefault(),t?d.put(`document/${s.id}`,s,{headers:{Authorization:`Token ${localStorage.getItem("keys")} `}}).then(l=>{m.fire({icon:"success",title:"Update Succesfully",showConfirmButton:!1,timer:1500}),a({id:"",title:"",type:"",requestor:"",doctype:"",message:"",status:"",position:"",remarks:""}),setTimeout(()=>{i("/dts/home/document/process")},1500)}).catch(l=>{console.log(l.data)}):d.patch(`document/sign_document/${s.id}`,{remarks:s.remarks},{headers:{Authorization:`Token ${localStorage.getItem("keys")} `}}).then(l=>{m.fire({icon:"success",title:"Received Succesfully",showConfirmButton:!1,timer:1500}),a({id:"",title:"",type:"",requestor:"",doctype:"",message:"",status:"",position:"",remarks:""}),setTimeout(()=>{i("/dts/home/document/completed")},1500)}).catch(l=>{console.log(l.data)})};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"relative  rounded-[5px] h-screen w-full pb-36 sm:pb-20 sm:pt-0  overflow-y-scroll flex items-start justify-center gap-5  ",children:e.jsxs("div",{className:" rounded-md relative animate__animated animate__fadeInUp mt-5 mb-20  w-[80%] sm:w-full sm:mx-5 max-w-[1366px] sm:px-2 px-10 border-dashed border border-blue/50 bg-white min-h-[200px] pb-5",children:[e.jsxs("div",{className:" w-full flex items-center justify-between py-4 ",children:[e.jsxs("div",{className:" flex flex-col leading-2",children:[e.jsx("h1",{className:" font-semibold text-base sm:text-xs",children:t?"Editable File Details":"Received File Details"}),t?e.jsx("p",{className:" text-xs text-red-600 font-medium sm:text-[8px]",children:"*Note that once you click save it will update you document details"}):e.jsx("p",{className:" text-xs font-medium sm:text-[8px]",children:"Donâ€™t forget to leave remarks of the before clicking Received"})]}),e.jsx("div",{onClick:()=>{i("/dts/home/document/process")},className:" cursor-pointer flex items-center justify-center bg-[#FF9292] text-xs rounded-[5px] border-dashed border text-blue border-blue h-[20px] w-[80px] ",children:"Back"})]}),e.jsxs("form",{className:" w-full border border-gray-500/20 rounded-[5px] px-5 py-8  grid grid-cols-3 gap-3  sm:grid-cols-1    ",onSubmit:p,children:[e.jsx(r,{label:"Name of the Requestor",placeholder:"E.g Taylor Sheeesh",span:"col-span-2 sm:col-span-1",disabled:!t,value:s.requestor,name:"requestor",onChange:o}),e.jsx(r,{label:"Designation / Position",placeholder:"E.g Officer1",span:"col-span-1 sm:col-span-1",disabled:!t,value:s.position,name:"position",onChange:o}),e.jsx(r,{label:"Title of the Document",placeholder:"E.g Letter",span:"col-span-2 sm:col-span-1",disabled:!t,value:s.title,name:"title",onChange:o}),e.jsx(h,{disabled:!t,data:s,setData:a,label:"Document Type",className:"cursor-pointer col-span-1 sm:col-span-1 "}),e.jsx(r,{label:t?"Message":"Message from Sender",placeholder:"E.g Signed",span:"col-span-3 sm:col-span-1",disabled:!t,value:s.message,name:"message",onChange:o}),t?e.jsx(g,{label:"Receiver",className:"cursor-pointer col-span-3 sm:col-span-1 ",data:s,setData:a,options:JSON.parse(localStorage.getItem("offices")||"")}):e.jsx(r,{label:"Remarks",placeholder:"E.g Signed",span:"col-span-3 sm:col-span-1",value:s.remarks,name:"remarks",onChange:o}),e.jsx(x,{variant:"outline",className:" bg-[#038500] rounded-[5px] text-white col-span-3 sm:col-span-1",children:t?"Save Edit":"Received"})]})]})})})}export{k as default};
