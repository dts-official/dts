import{r as n,j as e,L as S,B as j}from"./index-b1c7104b.js";import{I as p}from"./Input-e75af7b3.js";import"./axios-7d4ad366.js";import{D as v}from"./dropdownReceive-46ca2331.js";import{S as y,a as N,b as O,c as w,e as I,f as C,d as k}from"./select-d4b0c31a.js";import{S as f}from"./sweetalert2.all-d90f7d9c.js";import{a as D}from"./axios-82afda87.js";import"./chevron-down-dcbeb83a.js";const J=({label:c,data:s,disabled:t,setData:o,onSubmit:i})=>{const[u,m]=n.useState(""),[r,a]=n.useState("");n.useEffect(()=>{o({...s,reason:""}),console.log(" riinng"),console.log(s)},[i]);const[x]=n.useState([{type:"Official",options:["Travel (Please specify)","Seminar/Training/Conference/Meeting","Document Tracking/Pick-ip/Delivery","Others [1]"]},{type:"Personal",options:["Medication/Physical Check-up(subject to presentation of Doctorâ€™s Certificate)","Medical Attention to Family Member/Relative","Others [2]"]}]),g=l=>{m(l),o({...s,reason:l}),a("")},h=l=>{o({...s,specific:l.target.value}),a(l.target.value)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:s.reason!=""?" cursor-pointer col-span-2 sm:col-span-1 w-full flex flex-col gap-1":" cursor-pointer col-span-4 sm:col-span-1 w-full flex flex-col gap-1",children:[e.jsx("p",{className:" text-xs",children:c}),e.jsxs(y,{disabled:t,value:s.reason,required:!0,defaultValue:s.reason?s.reason:"",onValueChange:g,children:[e.jsx(N,{className:"  border border-blue/50 px-4 py-2 flex h-10 w-full rounded-md  bg-background text-sm outline-none ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2  disabled:cursor-not-allowed disabled:opacity-50",children:e.jsx(O,{placeholder:"Select..."})}),e.jsx(w,{children:x.map(l=>e.jsxs(I,{children:[e.jsx(C,{children:l.type}),l.options.map((d,b)=>e.jsx(k,{value:d,children:d},b))]}))})]})]}),s.reason!=""&&e.jsx("div",{className:" col-span-2",children:e.jsx(p,{type:"text",label:"Please specify",required:!0,placeholder:"",value:r,onChange:h,className:"w-full p-2 border rounded"})})]})};function q(){const[c,s]=n.useState(!1),[t,o]=n.useState({reason:"",specific:"",departure:"",returns:"",venue:"",userID:JSON.parse(localStorage.getItem("user")||"").id,position:JSON.parse(localStorage.getItem("user")||"").position,requestor:`${JSON.parse(localStorage.getItem("user")||"").first_name} ${JSON.parse(localStorage.getItem("user")||"").last_name}`,to:""}),i=r=>{o({...t,[r.target.name]:r.target.value})};function u(r){for(let a in r)if(r[a]===""||r[a]===null||r[a]===void 0)return!1;return!0}const m=r=>{r.preventDefault(),console.log(t),u(t)?D.post("gpass/all/",t,{headers:{Authorization:`Token ${localStorage.getItem("keys")}`}}).then(a=>{console.log(a.data),s(!c),f.fire({icon:"success",title:"Succesfully Created",showConfirmButton:!1,timer:1500}),o({reason:"",specific:"",departure:"",returns:"",venue:"",userID:JSON.parse(localStorage.getItem("user")||"").id,position:JSON.parse(localStorage.getItem("user")||"").position,requestor:`${JSON.parse(localStorage.getItem("user")||"").first_name} ${JSON.parse(localStorage.getItem("user")||"").last_name}`,to:""})}).catch(a=>{console.log(a.data)}):f.fire({icon:"error",title:"Oops...Empty Fields",text:"Some fields are Empty please fill it, thanks :) !"})};return e.jsx(e.Fragment,{children:e.jsx("div",{className:" relative  rounded-[5px] h-screen w-full pb-36 sm:pb-20 sm:pt-0  overflow-y-scroll flex items-start justify-center gap-5  ",children:e.jsxs("div",{className:" rounded-md relative animate__animated animate__fadeInUp mt-5 mb-20  w-[80%] sm:w-full sm:mx-5 max-w-[1366px] sm:px-2 px-10 border-dashed border border-blue/50 bg-white min-h-[200px] pb-5",children:[e.jsxs("div",{className:" w-full flex items-center justify-between py-4 ",children:[e.jsxs("div",{className:" sm:sticky flex flex-col leading-2",children:[e.jsx("h1",{className:" font-semibold text-base sm:text-xs",children:"Gatepass"}),e.jsx("p",{className:" text-xs font-medium sm:text-[8px]",children:"Please make sure to check all items before submitting"})]}),e.jsx(S,{to:"/dts/home/dashboard",onClick:()=>{localStorage.setItem("nav","")},className:" flex items-center justify-center bg-[#FF9292] text-xs rounded-[5px] border-dashed border text-blue border-blue h-[20px] w-[80px] ",children:"Cancel"})]}),e.jsxs("form",{className:" w-full border border-gray-500/20 rounded-[5px] px-5 py-8  grid grid-cols-4 gap-3  sm:grid-cols-1  ",onSubmit:m,children:[e.jsx(J,{onSubmit:c,data:t,setData:o,label:"Select Reason",className:"cursor-pointer col-span-4 sm:col-span-1 "}),e.jsx(p,{label:"Time of Departure",placeholder:"E.g Officer1",span:"col-span-2 sm:col-span-1",type:"datetime-local",value:t.departure,name:"departure",onChange:i}),e.jsx(p,{label:"Time of Returns",placeholder:"E.g Officer1",span:" col-span-2 sm:col-span-1",type:"datetime-local",value:t.returns,name:"returns",onChange:i}),e.jsx(p,{label:"Venue",placeholder:"E.g N Hotel, Cagayan de Oro Mis. Or",span:"col-span-4 sm:col-span-1",value:t.venue,name:"venue",onChange:i}),e.jsx(v,{label:"Approved by",className:"cursor-pointer col-span-4 sm:col-span-1 ",data:t,setData:o,options:JSON.parse(localStorage.getItem("offices")||"")}),e.jsx(j,{variant:"outline",className:" bg-[#038500] rounded-[5px] text-white col-span-4 sm:col-span-1",children:"Submit"})]})]})})})}export{q as default};
