import{u as p,r as l,j as e,L as d}from"./index-22e87fe1.js";import{b as f}from"./DICT-bg-3a7c86c6.js";import{L as h}from"./DICT-Banner-Logo-19625be2.js";import"./axios-7d4ad366.js";import{S as n}from"./sweetalert2.all-4f4a2599.js";import{a as x}from"./axios-82afda87.js";import{L as g}from"./loader-2-d5c2ba97.js";function L(){const a=p();l.useEffect(()=>{localStorage.getItem("keys")==null||a("dts/home"),localStorage.setItem("nav","0")},[]);const[o,i]=l.useState({email:"",password:""}),[u,r]=l.useState(!1);return e.jsxs("div",{className:" grid grid-cols-6 bg-background h-screen w-screen  flex-row justify-center bg-blue2 overflow-hidden ",children:[e.jsx(d,{to:"/dts/developers",className:"  z-50 absolute text-white bottom-0  p-10 bg-blue2 px-3 py-2 ",children:e.jsxs("p",{className:"  text-xs",children:["Developed by: ",e.jsx("span",{className:" font-semibold hover:underline",children:"DTS Team"})," "]})}),e.jsx("div",{className:" flex md:hidden col-span-4 lg:col-span-3",children:e.jsx("img",{className:" object-cover  w-full animate__animated animate__slideInDown",src:f,alt:"DICT_bg"})}),e.jsx("div",{className:" relative sm:justify-center px-10 lg:col-span-3  col-span-2 md:col-span-6 flex flex-col justify-center items-center h-full w-full   animate__animated animate__slideInUp bg-blue2  ",children:e.jsxs("form",{className:" flex flex-col min-h-[200px]  w-full max-w-[450px] md:max-w-[550px]  mb-20 ",onSubmit:async s=>{s.preventDefault(),r(!0);try{await x.post("token/login/",o).then(t=>{localStorage.setItem("keys",t.data.auth_token),x.get("users/me/",{headers:{Authorization:`Token ${t.data.auth_token}`}}).then(c=>{n.fire({icon:"success",title:"Login Successful!",showConfirmButton:!0,confirmButtonColor:"green",timer:5e3}).then(m=>{r(!1),(m.isConfirmed||m.dismiss===n.DismissReason.timer)&&(localStorage.setItem("user",JSON.stringify(c.data)),c.data.acc_lvl==0?a("/dts/admin"):a("/dts/home"))})})}).catch(t=>{console.error(t),t.response.data.non_field_errors&&(n.fire({icon:"error",title:"Login Error",text:`${t.response.data.non_field_errors[0]} Please try again!`,showConfirmButton:!0,confirmButtonColor:"red",timer:1e4}),setTimeout(()=>{r(!1)},3e3))})}catch(t){console.log("Try Catch: ",t)}},children:[e.jsxs("div",{className:" flex flex-col gap-10 mb-10",children:[e.jsx("img",{className:"  w-[60%] object-contain self-center",src:h,alt:"DICT_bg"}),e.jsx("p",{className:" text-textW text-[25px] font-semibold ",children:"Log in to your account"})]}),e.jsx("label",{className:" text-textW mb-1",children:" Email Address "}),e.jsx("input",{className:" w-full h-[40px] text-textW bg-blue2 border-[1px] outline-0 focus:border-[2px] focus:border-textW shadow-inner rounded-[5px] pl-4 ",type:"email",name:"email",onChange:s=>{i({...o,email:s.target.value})},required:!0}),e.jsxs("div",{className:" w-full flex flex-col",children:[e.jsx("label",{className:" text-textW mt-5 mb-1",children:" Password "}),e.jsx("input",{className:"w-full h-[40px] text-textW bg-blue2 border-[1px] outline-0 focus:border-[2px] focus:border-textW shadow-inner rounded-[5px] pl-4 ",type:"password",name:"password",onChange:s=>{i({...o,password:s.target.value})},required:!0})]}),e.jsx("p",{className:" text-textW text-[13px] mt-[25px] cursor-pointer hover:underline ",onClick:()=>{a("/dts/forgot_password")},children:"Forgot your password?"}),u?e.jsxs("button",{className:" pointer-events-none text-textW bg-yellow hover:bg-yellow/80 transition-all  duration-75 cursor-pointer text-[18px] w-full h-[45px] mt-6 rounded-full flex items-center justify-center gap-2 ",type:"submit",children:[e.jsx(g,{className:" animate-spin"})," Loading...  "]}):e.jsx("button",{className:" text-textW bg-yellow hover:bg-yellow/80 transition-all  duration-75 cursor-pointer text-[18px] w-full h-[45px] mt-6 rounded-full flex items-center justify-center gap-2 ",type:"submit",children:" Login "}),e.jsx("hr",{className:"  border-none pb-10"}),e.jsx("div",{className:" flex w-full min-h-[10px] justify-center items-center",children:e.jsxs(d,{to:"/dts/registration",className:" text-sm text-accent",children:["Don't have an account? ",e.jsx("b",{className:" hover:underline",children:"Create a new one"})]})})]})})]})}export{L as default};
