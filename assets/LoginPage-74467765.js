import{u as f,r as o,j as e,L as x}from"./index-8ec54245.js";import{b as p,A as g}from"./Alert-4e293fd4.js";import{L as h}from"./DICT-Banner-Logo-19625be2.js";import"./axios-7d4ad366.js";import{a as i}from"./axios-82afda87.js";import{L as b}from"./loader-2-06a6ae74.js";function S(){const r=f();o.useEffect(()=>{localStorage.getItem("user")==null&&localStorage.setItem("user",'{"first_name":"Angel","last_name":"Naval","position":"Officer 202","designation":"gwapo","id":26,"email":"markgilrusiana437@gmail.com"}'),localStorage.setItem("nav","0")},[]);const[n,c]=o.useState({email:"",password:""}),[m,s]=o.useState(""),u=()=>{i.get("/office/all/get").then(t=>{const a=t.data.map(d=>({id:d.officeID,name:d.name}));localStorage.setItem("officeData",JSON.stringify(a))}).catch(t=>{t.response?(console.error(t.response.data),console.error(t.response.status),console.error(t.response.headers)):t.request?console.error(t.request):console.error("Error",t.message),console.error(t.config)})};return o.useEffect(()=>{u()},[]),e.jsxs("div",{className:" grid grid-cols-6 bg-background h-screen w-screen  flex-row justify-center bg-blue2 overflow-hidden ",children:[e.jsx(x,{to:"/dts/developers",className:"  z-50 absolute text-white bottom-0  p-10 bg-blue2 px-3 py-2 ",children:e.jsxs("p",{className:"  text-xs",children:["Developed by: ",e.jsx("span",{className:" font-semibold hover:underline",children:"DTS Team"})," "]})}),e.jsx("div",{className:" flex md:hidden col-span-4 lg:col-span-3",children:e.jsx("img",{className:" object-cover  w-full animate__animated animate__slideInDown",src:p,alt:"DICT_bg"})}),e.jsx("div",{className:" relative sm:justify-center px-10 lg:col-span-3  col-span-2 md:col-span-6 flex flex-col justify-center items-center h-full w-full   animate__animated animate__slideInUp bg-blue2  ",children:e.jsxs("form",{className:" flex flex-col min-h-[200px]  w-full max-w-[450px] md:max-w-[550px]  mb-20 ",onSubmit:async t=>{t.preventDefault(),s("s");try{await i.post("token/login/",n).then(l=>{localStorage.setItem("keys",l.data.auth_token),i.get("users/me/",{headers:{Authorization:`Token ${l.data.auth_token}`}}).then(a=>{console.log("response data: ",a.data),s("success"),localStorage.setItem("user",JSON.stringify(a.data)),setTimeout(()=>{a.data.acc_lvl==0?r("/dts/admin"):r("/dts/home"),s("")},1e3)})}).catch(()=>{s("error"),setTimeout(()=>{s("")},3e3)})}catch{s("error"),setTimeout(()=>{s("")},3e3)}},children:[e.jsxs("div",{className:" flex flex-col gap-10 mb-10",children:[e.jsx("img",{className:"  w-[60%] object-contain self-center",src:h,alt:"DICT_bg"}),e.jsx("p",{className:" text-textW text-[25px] font-semibold ",children:"Log in to your account"})]}),e.jsx("label",{className:" text-textW mb-1",children:" Email Address "}),e.jsx("input",{className:" w-full h-[40px] text-textW bg-blue2 border-[1px] outline-0 focus:border-[2px] focus:border-textW shadow-inner rounded-[5px] pl-4 ",type:"email",name:"email",onChange:t=>{c({...n,email:t.target.value})},required:!0}),e.jsxs("div",{className:" w-full flex flex-col",children:[e.jsx("label",{className:" text-textW mt-5 mb-1",children:" Password "}),e.jsx("input",{className:"w-full h-[40px] text-textW bg-blue2 border-[1px] outline-0 focus:border-[2px] focus:border-textW shadow-inner rounded-[5px] pl-4 ",type:"password",name:"password",onChange:t=>{c({...n,password:t.target.value})},required:!0})]}),e.jsx("p",{className:" text-textW text-[13px] mt-[25px] cursor-pointer hover:underline ",onClick:()=>{r("/dts/forgot_password")},children:"Forgot your password?"}),m?e.jsxs("button",{className:" pointer-events-none text-textW bg-yellow hover:bg-yellow/80 transition-all  duration-75 cursor-pointer text-[18px] w-full h-[45px] mt-6 rounded-full flex items-center justify-center gap-2 ",type:"submit",children:[e.jsx(b,{className:" animate-spin"})," Loading...  "]}):e.jsx("button",{className:" text-textW bg-yellow hover:bg-yellow/80 transition-all  duration-75 cursor-pointer text-[18px] w-full h-[45px] mt-6 rounded-full flex items-center justify-center gap-2 ",type:"submit",children:" Login "}),e.jsx("div",{className:" mt-5",children:e.jsx(g,{variant:m})}),e.jsx("hr",{className:"  border-none pb-10"}),e.jsx("div",{className:" flex w-full min-h-[10px] justify-center items-center",children:e.jsxs(x,{to:"/dts/registration",className:" text-sm text-accent",children:["Don't have an account? ",e.jsx("b",{className:" hover:underline",children:"Create a new one"})]})})]})})]})}export{S as default};
