import{r as c,j as e,u as v}from"./index-c51a5212.js";import{I as p}from"./Input-bb915730.js";import"./axios-7d4ad366.js";import{S as f,a as x,b as g,c as h,d as b}from"./select-0dd3d34e.js";import{S}from"./sweetalert2.all-cab678a6.js";import{a as N}from"./axios-82afda87.js";import{L as I}from"./loader-2-1081cf4c.js";import"./chevron-down-acaf0544.js";const y=({className:i,label:d,options:r,setData:n,value:t})=>{const[,a]=c.useState(""),o=s=>{const l=r.find(m=>m.name===s);l&&(n(l.name),console.log(l),a(s))};return e.jsxs("div",{className:i+"w-full flex flex-col gap-1 text-xs",children:[e.jsx("p",{className:"  mb-1 truncate",children:d}),e.jsxs(f,{required:!0,value:t,onValueChange:o,children:[e.jsx(x,{className:"  w-full h-[40px] outline-0 border border-blue/50 shadow-inner rounded-md pl-4",children:e.jsx(g,{placeholder:"Select Position..."})}),e.jsx(h,{children:r.map(s=>e.jsx(b,{value:s.name,children:s.name}))})]})]})},O=({className:i,label:d,options:r,setData:n,value:t})=>{const[,a]=c.useState(""),o=s=>{const l=r.find(m=>m.name===s);l&&(n(l.id),console.log("selected: ",l),a(s))};return c.useEffect(()=>{const s=r.find(l=>l.id===t);s&&a(s.name)},[r,t]),e.jsxs("div",{className:i+"w-full flex flex-col gap-1 text-xs",children:[e.jsx("p",{className:"  mb-1 truncate",children:d}),e.jsxs(f,{required:!0,value:t,onValueChange:o,children:[e.jsx(x,{className:"  w-full h-[40px] outline-0 border border-blue/50 shadow-inner rounded-md pl-4",children:e.jsx(g,{placeholder:"Select Office..."})}),e.jsx(h,{children:r.map(s=>e.jsx(b,{value:s.name,children:s.name}))})]})]})},q=()=>{const i=v(),[d,r]=c.useState(""),n=JSON.parse(localStorage.getItem("selectedUser")||""),[t,a]=c.useState({first_name:n.first_name,last_name:n.last_name,email:n.email,position:n.position,office:n.office,password:""}),o=JSON.parse(localStorage.getItem("offices")||"").find(s=>s.id===t.office);return c.useEffect(()=>{console.table(t),console.log(o)},[t]),e.jsx("div",{className:"  w-full h-[100vh] bg-blue3 flex justify-center items-center ",children:e.jsxs("div",{className:" w-[90%]  sm:h-[95%] sm:w-[90%]  overflow-hidden bg-white rounded-md drop-shadow-glow flex flex-col p-10 sm:p-5 gap-10 sm:gap-5",children:[e.jsxs("div",{className:" sm:gap-5 flex flex-row sm:flex-col items-center w-full sm:items-start justify-between",children:[e.jsxs("div",{className:"div1",children:[e.jsx("h1",{className:"text-black font-poppins font-bold  w-[200px] text-lg eading-normal tracking-tight",children:" Edit User "}),e.jsx("p",{className:"text-teal-500 font-poppins text-m text-base font-normal leading-normal tracking-tight ",children:" Update User"})]}),e.jsx("div",{className:"  flex sm:flex-col items-center gap-5 sm:justify-between w-full justify-end  relative sm:gap-5 sm:items-start  ",children:e.jsx("button",{className:`\r
                        rounded-[5px] truncate border-2 border-red-600 hover:bg-bgG/10 transition-all duration-200 bg-red-600/20  text-red-600 px-5 py-1 font-medium text-xs\r
                    `,onClick:()=>{i("/dts/admin/user")},children:"Cancel"})})]}),e.jsxs("form",{onSubmit:s=>{s.preventDefault(),r("spin");let l=JSON.parse(localStorage.getItem("selectedUser")||""),m=l?l.id:null;try{let u=Object.fromEntries(Object.entries(t).filter(([j,w])=>!(j==="password"&&w==="")));N.put("users/update/"+m+"/",u,{headers:{Authorization:`Token ${localStorage.getItem("keys")}`}}).then(()=>{setTimeout(()=>{S.fire({icon:"success",title:"You have successfully updated this user!",showConfirmButton:!1,timer:1500})},1e3),setTimeout(()=>{r(""),a({first_name:"",last_name:"",email:"",position:"",office:"",password:""}),i("/dts/admin/user/")},2e3),console.log("Updated User")})}catch(u){console.error(u)}},className:" grid grid-cols-3 gap-5 sm:gap-2 items-end",children:[e.jsx(p,{required:!0,label:"First Name",span:" col-span-1 sm:col-span-3 md:col-span-3",value:t.first_name,onChange:s=>a({...t,first_name:s.target.value})}),e.jsx(p,{required:!0,label:"Last Name",span:" col-span-1 sm:col-span-3 md:col-span-3",value:t.last_name,onChange:s=>a({...t,last_name:s.target.value})}),e.jsx(p,{required:!0,type:"email",label:"Email",span:" col-span-1 sm:col-span-3 md:col-span-3",value:t.email,onChange:s=>a({...t,email:s.target.value})}),e.jsx(y,{label:"Position",className:"cursor-pointer col-span-1 sm:col-span-3 md:col-span-3 ",setData:s=>a({...t,position:s}),value:t.position,options:[{id:1,name:"Regional Director"},{id:2,name:"Provincial Officer"},{id:3,name:"Project Development Officer I"},{id:4,name:"Project Development Officer II"},{id:5,name:"Project Development Officer III"},{id:6,name:"Cyber Security Officer I"},{id:7,name:"Cyber Security Officer II"},{id:8,name:"Cyber Security Officer III"}]}),e.jsx(O,{label:"Office Designation",className:"cursor-pointer col-span-1 sm:col-span-3 md:col-span-3 ",setData:s=>a({...t,office:s}),value:o?o.name:"",options:JSON.parse(localStorage.getItem("offices")||"")}),e.jsx(p,{required:!0,type:"password",label:"Password",span:" col-span-1 sm:col-span-3 md:col-span-3",value:t.password,onChange:s=>a({...t,password:s.target.value})}),e.jsx("div",{className:"flex flex-col w-full col-span-3 ",children:d?e.jsxs("button",{className:" pointer-events-none text-textW bg-bgG hover:bg-bgG/10  transition-all  duration-75 cursor-pointer text-[18px] w-full h-[45px] mt-6 rounded-full flex items-center justify-center gap-2 ",type:"submit",children:[" Loading ",e.jsx(I,{className:" animate-spin"})," "]}):e.jsx("button",{type:"submit",className:`  w-full rounded-[5px] truncate border-2 border-textG hover:bg-bgG/10 transition-all duration-200 bg-bgG mt-6 text-textG px-5 py-1 font-medium text-md\r
                    `,children:" Update User"})})]})]})})};export{q as default};
