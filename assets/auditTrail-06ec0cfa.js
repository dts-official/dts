import{r as o,j as e,a as E}from"./index-c51a5212.js";import{s as H}from"./search-e4261d9d.js";import"./axios-7d4ad366.js";import{r as m}from"./index-7dfc5675.js";import{a as W}from"./axios-82afda87.js";const D=[{Header:"Timestamp",accessor:"created_at",disableSortBy:!0},{Header:"Activity/Action",accessor:"message",disableSortBy:!0,Cell:({cell:{value:d}})=>e.jsx("div",{className:"inline-block whitespace-nowrap justify-center items-center rounded-full border-[1px] hover:bg-opacity-50 text-xs border-[#4318FF] bg-[#F5F0FF] text-[#4318FF] font-md px-6 py-1 sm:px-1 sm:py-1",children:d})}];function _({search:d,data:h}){const[n,g]=o.useState({key:"history_date",direction:"desc"}),u=o.useMemo(()=>{let a=[...h];return n!==null&&a.sort((t,s)=>t[n.key]<s[n.key]?n.direction==="asc"?-1:1:t[n.key]>s[n.key]?n.direction==="asc"?1:-1:0),a},[h,n]),{getTableProps:c,getTableBodyProps:b,headerGroups:f,prepareRow:x,page:l,state:P,setGlobalFilter:L,gotoPage:w,nextPage:v,previousPage:j,canPreviousPage:N,canNextPage:k,pageCount:r,setPageSize:F}=m.useTable({columns:D,data:u},m.useGlobalFilter,m.useSortBy,m.usePagination),{pageIndex:i}=P;o.useEffect(()=>{F(10)},[]),o.useEffect(()=>{L(d)},[d]);const[T,S]=o.useState([]),[y,A]=o.useState(!1);return e.jsxs("div",{className:" flex flex-col h-full w-full justify-between",children:[e.jsxs("div",{className:"overflow-hidden",children:[e.jsx("table",{...c(),className:"w-full text-xs font-light table-fixed",children:e.jsx("thead",{className:"text-violet1 h-[20px]",children:f.map(a=>e.jsx("tr",{...a.getHeaderGroupProps(),className:"border-b border-[#00000013] text-sm",children:a.headers.map((t,s)=>e.jsxs("th",{...t.getHeaderProps(t.getSortByToggleProps()),className:"pl-4 py-2 text-left truncate",children:[s===0&&e.jsx("input",{type:"checkbox",className:"mr-5 text-white w-5 h-5 cursor-pointer ",checked:y,onClick:p=>{p.stopPropagation(),A(!y),S(M=>{const C={...M};return l.forEach(B=>{C[B.id]=!y}),C})}}),t.render("Header"),e.jsx("span",{children:t.isSorted?t.isSortedDesc?e.jsx("span",{children:"▼"}):e.jsx("span",{children:"▲"}):""})]}))}))})}),e.jsx("div",{className:"overflow-y-auto overflow-x-hidden  min-h-[300px] h-full pb-10 pr ",children:e.jsx("table",{className:"w-full text-xs font-light table-fixed",children:e.jsx("tbody",{...b(),className:"overflow-hidden w-full",children:l.map(a=>(x(a),e.jsx("tr",{...a.getRowProps(),className:"hover:bg-blue3/10 h-10 border-b border-[#00000013] text-sm font-medium",children:a.cells.map((t,s)=>e.jsxs("td",{className:"h-10 pl-4 py-4 text-left truncate",children:[" ",s===0&&e.jsx("input",{type:"checkbox",className:"mr-5 text-white w-5 h-5 cursor-pointer ",checked:!!T[a.id],onChange:()=>S(p=>({...p,[a.id]:!p[a.id]}))}),t.render("Cell")]},t.column.id))})))})})})]}),e.jsxs("div",{className:" hidden sm:flex  h-[10%] k w-full items-center bottom-0 self-center mb-2  justify-center gap-4 sm:gap-2 mt-2 bg-blueTable-100 text-center",children:[e.jsx("button",{onClick:()=>j(),disabled:!N,className:`className="flex items-center gap-2 px-6 sm:px-3 sm:p-3 py-3 font-sans text-xs font-bold text-center text-gray-900 uppercase align-middle transition-all rounded-lg select-none hover:bg-gray-900/10 active:bg-orange\r
                                    disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none"`,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true",className:"w-4 h-4",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})})}),e.jsxs("p",{className:" text-xs",children:[" ",e.jsxs("b",{children:[i+1," "]})," / ",r]}),e.jsx("button",{onClick:()=>v(),disabled:!k,className:`flex items-center gap-2 px-6 sm:px-3 sm:p-3 py-3 font-sans text-xs font-bold text-center text-gray-900 uppercase align-middle transition-all rounded-lg select-none hover:bg-gray-900/10 active:bg-orange\r
                                    disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none`,type:"button",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true",className:"w-4 h-4",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"})})})]}),e.jsxs("div",{className:" sm:hidden  h-[10%] k w-full items-center bottom-0 self-center mb-2 flex justify-center gap-4 sm:gap-2 mt-2 bg-blueTable-100 text-center",children:[e.jsx("button",{onClick:()=>j(),disabled:!N,className:`className="flex items-center gap-2 px-6 sm:px-3 sm:p-3 py-3 font-sans text-xs font-bold text-center text-gray-900 uppercase align-middle transition-all rounded-lg select-none hover:bg-gray-900/10 active:bg-orange\r
                                    disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none"`,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true",className:"w-4 h-4",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})})}),i>2&&r>5&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>w(0),className:" px-3 py-1 border h-9 max-h-[40px] w-9 max-w-[40px] select-none rounded-lg text-center align-middle font-sans text-xs font-medium uppercase text-gray-900 transition-all hover:bg-gray-900/10  active:bg-orange disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none",children:"1"}),e.jsx("span",{className:"px-3 py-1",children:"..."})]}),Array.from({length:Math.min(5,r)},(a,t)=>{let s;return r<=5||i<3?s=t:i>r-4?s=r-5+t:s=i-2+t,e.jsx("button",{onClick:()=>w(s),className:`px-3 py-1 border  ${i===s?"h-9 max-h-[40px] w-9 max-w-[40px] select-none rounded-lg bg-orange text-center align-middle font-sans text-xs font-medium uppercase text-white shadow-md shadow-gray-900/10 transition-all hover:shadow-lg hover:shadow-orange focus:opacity-[0.85] focus:shadow-none active:opacity-[0.85] active:shadow-none disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none":"h-9 max-h-[40px] w-9 max-w-[40px] select-none rounded-lg text-center align-middle font-sans text-xs font-medium uppercase text-gray-900 transition-all hover:bg-gray-900/10  active:bg-orange disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none"}`,children:s+1},s)}),i<r-3&&r>5&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"px-3 py-1",children:"..."}),e.jsx("button",{onClick:()=>w(r-1),className:" px-3 py-1 border h-9 max-h-[40px] w-9 max-w-[40px] select-none rounded-lg text-center align-middle font-sans text-xs font-medium uppercase text-gray-900 transition-all hover:bg-gray-900/10  active:bg-orange disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none",children:r})]}),e.jsx("button",{onClick:()=>v(),disabled:!k,className:`flex items-center gap-2 px-6 sm:px-3 sm:p-3 py-3 font-sans text-xs font-bold text-center text-gray-900 uppercase align-middle transition-all rounded-lg select-none hover:bg-gray-900/10 active:bg-orange\r
                                    disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none`,type:"button",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true",className:"w-4 h-4",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"})})})]})]})}const U=()=>{const d=E(),n=new URLSearchParams(d.search).get("search"),[g,u]=o.useState(n),c=l=>{u(l.target.value),window.history.pushState(null,"",`/dts/admin/user?search=${l.target.value}`)},[b,f]=o.useState([]),x=async()=>{try{const l=await W.get("audits/by_office",{headers:{Authorization:`Token ${localStorage.getItem("keys")}`}});f(l.data)}catch(l){console.error(l)}};return o.useEffect(()=>{x()},[]),e.jsx("div",{className:" h-full w-full flex  items-center justify-center",children:e.jsxs("div",{className:" w-[90%] h-[80%] sm:h-[95%] sm:w-[90%] overflow-hidden shadow-lg rounded-md drop-shadow-glow flex flex-col p-10 sm:p-5 gap-10 sm:gap-5 ",children:[e.jsxs("div",{className:" sm:gap-5 flex flex-row sm:flex-col items-center w-full sm:items-start justify-between",children:[e.jsxs("div",{className:"div1",children:[e.jsxs("h1",{className:"text-black font-poppins font-bold  w-[200px] text-lg eading-normal tracking-tight",children:[" ","Audit Trail"," "]}),e.jsxs("p",{className:"text-teal-500 font-poppins text-m text-base font-normal leading-normal tracking-tight ",children:[" ","All Document Types"]})]}),e.jsx("div",{className:"  flex sm:flex-col items-center gap-5 sm:justify-between w-full justify-end  relative sm:gap-5 sm:items-start  ",children:e.jsxs("div",{className:"relative px-3 py-1 border-border border  flex items-center w-[80%] sm:w-full bg-bgW rounded-md m-0  max-w-[200px] sm:max-w-full",children:[e.jsx("input",{value:g,onChange:c,placeholder:"Search...",className:"outline-none w-full bg-bgW text-xs pl-7 text-gray-900 py-1 ",type:"search"}),e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none mr-7px-4",children:e.jsx("img",{src:H,alt:"Search",className:"h-5 w-5"})})]})})]}),e.jsx("div",{className:"flex-col max-h-full h-full overflow-hidden ",children:e.jsx(_,{data:b,search:g,fetchAudits:x,handleSearch:c})})]})})};export{U as default};
